//-----------------------------------------------------------------------------------------------------
//---------------------------Recibo por params el puerto con el argumento -p---------------------------
//-----------------------------------------------------------------------------------------------------
const yargs = require("yargs/yargs")(process.argv.slice(2));
const args = yargs
  .default({
    p: 8080,
  })
  .alias({
    p: "port",
  }).argv;

module.exports = args;

//-----------------------------------------------------------------------------------------------------
//-----------------------------------------Importo toda mi app-----------------------------------------
//-----------------------------------------------------------------------------------------------------
const serverHttp = require("./app.js");

//-----------------------------------------------------------------------------------------------------
//-----------------------------------------Levanto el servidor-----------------------------------------
//-----------------------------------------------------------------------------------------------------

//---->El puerto se puede recibir por variable de entorno o por argumento
const PORT = process.env.PORT || args.port;
serverHttp.listen(PORT, () => {
  console.log(`Server escucnado en el puerto http://localhost:${PORT}`);
});
